# SPDX-FileCopyrightText: 2019 Bitcoin Suisse
#
# SPDX-License-Identifier: LicenseRef-Proprietary
#
<<: !include "./hpack/module.yaml"

name:                tzbtc
version:             0.0.1

extra-source-files:
- README.md
- CONTRIBUTING.md

category:            Blockchain
description: Wrapped Bitcoin on Tezos Blockchain

library:
  <<: *lib-common

  default-extensions:
    - DerivingStrategies
    - DeriveAnyClass
    - NoApplicativeDo

  dependencies:
    - aeson
    - aeson-casing
    - bytestring
    - containers
    - hex-text
    - memory
    - morley
    - lorentz-contracts
    - morley-prelude
    - named
    - fmt
    - servant
    - servant-client
    - servant-client-core
    - text
    - tezos-bake-monitor-lib
    - universum
    - optparse-applicative
    - vinyl
    - hex-text
    - bytestring
    - aeson
    - aeson-casing
    - singletons

executables:
  tzbtc:
    <<: *exec-common

    dependencies:
      - fmt
      - lorentz-contracts
      - morley-prelude
      - morley
      - optparse-applicative
      - safe-exceptions
      - tzbtc

  tzbtc-client:
    main: Main.hs
    source-dirs: client

    dependencies:
      - aeson
      - aeson-pretty
      - bytestring
      - directory
      - fmt
      - http-client
      - lorentz-contracts
      - morley-prelude
      - morley
      - optparse-applicative
      - safe-exceptions
      - servant-client
      - servant-client-core
      - text
      - tezos-bake-monitor-lib
      - tzbtc

tests:
  tzbtc-test:
    <<: *test-common

    default-extensions:
      - DerivingStrategies

    dependencies:
    - tzbtc
    - morley-prelude
    - universum
    - tasty
    - tasty-hunit
    - morley
    - fmt
    - bytestring
    - containers
    - singletons
    - lorentz-contracts
    - named
    - tezos-bake-monitor-lib
    - hex-text
    - hspec
